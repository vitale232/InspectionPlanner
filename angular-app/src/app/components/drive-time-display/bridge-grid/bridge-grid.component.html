<div *pblNgridBlockUiDef class="pbl-ngrid-ui-block">
    <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
</div>

<pbl-ngrid id="newYorkBridgeGrid" persistState
            matHeaderContextMenu="excelMenu"
            rowReorder
            columnReorder
            blockUi
            matSort
            vScrollFixed
            cellTooltip
            matCheckboxSelection="selection"
            focusMode="cell"
            [dataSource]="useMapExtent ? mapBridgesDataSource : allBridgesDataSource"
            [columns]="columns"
            (cellClick)="$event.context && $event.context.startEdit()"
            class="grid pbl-ngrid-cell-ellipsis pbl-ngrid-header-cell-ellipsis"
            >

    <!-- <div *pblNgridCellTypeDef="'number'">123<div> -->
    <div *pblNgridOuterSection="'top'">
        <mat-toolbar>
            <div *ngIf="useMapExtent">
                <button mat-button
                        matTooltip="Populate table with all bridges in this drive time search"
                        (click)="toggleUseMapExtent()"
                        >
                    <mat-icon>visibility</mat-icon> Show All Bridges
                </button>
            </div>
            <div *ngIf="!useMapExtent">
                <button mat-button
                        color="warn"
                        matTooltip="Populate table with bridges displayed on the map"
                        (click)="toggleUseMapExtent()"
                        >
                        <mat-icon>visibility_off</mat-icon> Show Map Bridges
                </button>
            </div>
            <button mat-icon-button
                   (click)="refresh()"
                   matTooltip="Refresh grid data"
                   >
                   <mat-icon>refresh</mat-icon>
            </button>
            <!-- <button mat-icon-button><mat-icon>gps_fixed</mat-icon></button>   -->
            <span class="fill-remaining-space"></span>
            <button mat-icon-button
                    aria-label="Close table screen split"
                    (click)="closeTable()"
                    matTooltip="Close table"
                    > <mat-icon>close</mat-icon>
            </button>
        </mat-toolbar>
    </div>
    <div *pblNgridOuterSection="'bottom'" class="typography-container mat-typography">
        <div *ngIf="useMapExtent; else allBridges">
            Tabulated {{ mapBridgesDataSource.length }} bridges
        </div>
        <ng-template #allBridges>
            Tabulated {{ allBridgesDataSource.length }} bridges
        </ng-template>
    </div>
</pbl-ngrid>
